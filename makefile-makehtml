
CC=cl /nologo
CFLAGS=-c -G3 -Ox -W3 -Zp -Zd
LINKER=link
LINKCON = /nologo

all:makehtml.exe jhead.exe

OBJ = obj

OBJECTS_MAKEHTML = $(OBJ)\main.obj        \
                   $(OBJ)\makehtml.obj    \
                   $(OBJ)\collectdir.obj  \
                   $(OBJ)\updatecache.obj \
                   $(OBJ)\crosslink.obj   \
                   $(OBJ)\utility.obj     \
                   $(OBJ)\imagegather.obj 

$(OBJECTS_MAKEHTML): $(@B).c makehtml.h 
    $(CC) /Fo$(OBJ)\ $(CFLAGS) $(@B).c

makehtml.exe: $(OBJECTS_MAKEHTML)
    $(LINKER) $(LINKCON) -OUT:makehtml.exe $(OBJECTS_MAKEHTML)
    copy makehtml.exe c:\bin


OBJECTS_JHEAD = $(OBJ)\jhead.obj  \
                $(OBJ)\jpgfile.obj \
                $(OBJ)\myglob.obj \
                $(OBJ)\exif.obj 

$(OBJECTS_JHEAD): $(@B).c makehtml.h 
    $(CC) /Fo$(OBJ)\ $(CFLAGS) $(@B).c

jhead.exe: $(OBJECTS_JHEAD)
    $(LINKER) $(LINKCON) -OUT:jhead.exe $(OBJECTS_JHEAD)
